export const filterArrayByCriteria = async function filterArrayByCriteria(data, timestamp, limit) {
    // Convert the input timestamp to UTC
    const targetTimestamp = new Date(timestamp);
    const targetTimestampUTC = new Date(targetTimestamp.toISOString());
    debugger
    const filteredData = data.filter((item) => {
        // Convert attempts and maxAttempts to numbers, if necessary.
        const attempts = Number(item.attempts);
        const maxAttempts = Number(item.max_attempts);

        // Normalize all timestamps to UTC for consistent comparison
        const lastAttemptAtUTC = item.last_attempt_at ? new Date(item.last_attempt_at) : null;
        const createdAtDateUTC = new Date(item.created_at);
        // const retryPeriodUTC = new Date(createdAtDateUTC.getTime() + item.retry_period);
        const retryPeriodUTC = new Date(createdAtDateUTC.getTime() + (Number(item.retry_period) * 24 * 60 * 60 * 1000));

        debugger
        if (
            attempts < maxAttempts &&
            // (lastAttemptAtUTC === null || lastAttemptAtUTC < targetTimestampUTC || lastAttemptAtUTC > targetTimestampUTC) && // Put null values at the top
            (lastAttemptAtUTC === null || lastAttemptAtUTC < targetTimestampUTC) && // Put null values at the top
            // (retryPeriodUTC.setUTCHours(0, 0, 0, 0) >= targetTimestampUTC.setUTCHours(0, 0, 0, 0) || createdAtDateUTC.setUTCHours(0, 0, 0, 0) <= targetTimestampUTC.setUTCHours(0, 0, 0, 0))
            (
                retryPeriodUTC.setUTCHours(0, 0, 0, 0) >= targetTimestampUTC.setUTCHours(0, 0, 0, 0)
                || createdAtDateUTC.setUTCHours(0, 0, 0, 0) >= targetTimestampUTC.setUTCHours(0, 0, 0, 0)
            )
        ) {
            return true;
        }
        return false;
    }
    );


    //     // Function to parse dates
    const parseDate = (dateString) => (dateString ? new Date(dateString) : null);


    // Sort the filteredData to put null lastAttemptAt values at the top
    filteredData.sort((a, b) => {
        if (a.last_attempt_at === null && b.last_attempt_at === null) {
            return 0;
        }
        if (a.last_attempt_at === null) {
            return -1;
        }
        if (b.last_attempt_at === null) {
            return 1;
        }
        // Check if lastAttemptAt is a valid date before comparing
        // @ts-ignore
        return parseDate(a.last_attempt_at).getTime() - parseDate(b.last_attempt_at).getTime();

    });



    // Apply the limit to the filtered result
    if (limit !== undefined && limit !== null && limit > 0) {
        debugger
        return filteredData.slice(0, limit);
    }
    debugger

    return filteredData;
}

// Example usage:
// // const maxAttempts = 50;
// const timestamp = "2023-11-03T00:00:00.0+01:00"; // Replace with your timestamp
// // const gracePeriod = 0; // Replace with your grace period
// // const repaymentDate = "2023-11-03T16:00:00.000+01:00"; // Replace with your repayment date
// const limit = 4;
// // Sample data array
// const data = [
//     {
//         "id": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//         "amountRequested": "2000",
//         "amountApproved": "2000",
//         "walletId": "7033680599",
//         "userId": "2347033680599",
//         "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//         "rfiCode": "apmfb",
//         "customerReference": "1699000823552y",
//         "firstName": "Michael",
//         "lastName": "Alao",
//         "okraCustomerId": "62de783109c31d8bda9763d2",
//         "phone": "2347033680599",
//         "email": "michaeltestingofsoftware@gmail.com",
//         "loanProductName": "Quick Loan",
//         "loanProductId": "fe23666a-0c69-4e06-b323-6423e62a8694",
//         "productDetails": {
//             "id": "fe23666a-0c69-4e06-b323-6423e62a8694",
//             "status": "active",
//             "penalty": "10",
//             "rfiCode": "apmfb",
//             "tagName": "quick short time loan # 1 - 5000",
//             "createdAt": "2023-09-11T10:05:26.693+00:00",
//             "updatedAt": "2023-09-11T10:05:26.693+00:00",
//             "description": "Quick loan for all customers, this loan has a flexible payment plan, and can be paid back within 120 days.",
//             "fixedCharge": "100",
//             "productName": "Quick Loan",
//             "ratedCharge": "10",
//             "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//             "currencyCode": "NGN",
//             "interestRate": "20",
//             "lowestAmount": "100",
//             "highestAmount": "500000",
//             "additionalDetails": "{}",
//             "loanFundingAccount": "168605200474015",
//             "loanRecoveryWalletId": "168605200474015",
//             "loanRepaymentAccount": "168605200474015",
//             "interestOnLoanAccount": "168605200474015",
//             "interestOnLoanWalletId": "168605200474015",
//             "outstandingLoanWalletId": "168605200474015"
//         },
//         "customerSavingsAccount": "0101472574",
//         "loanAccountNumber": "7663070807",
//         "bankCode": "apmfb",
//         "beneficiaryAccountNumber": "0101472574",
//         "beneficiaryAccountName": "ADAM ALAKA",
//         "beneficiaryAccountBankName": "Astrapolaris Mfb",
//         "beneficiaryAccountBankCode": "apmfb",
//         "otherAccountNumber": null,
//         "otherAccountName": null,
//         "otherAccountBankName": null,
//         "otherAccountBankCode": null,
//         "duration": "2",
//         "tagName": "Test cron job",
//         "currencyCode": "NGN",
//         "bvn": "52639807418",
//         "isBvnVerified": false,
//         "lng": "3.8672522",
//         "lat": "7.3679899",
//         "creditRating": null,
//         "interestRate": 0.12,
//         "interestDueOnLoan": "100",
//         "totalAmountToRepay": "2100",
//         "amountPaid": "0",
//         "amountOutstanding": "0",
//         "totalAmountPaidOnLoan": "0",
//         "amountOutstandingOnLoan": "0",
//         "totalAmountPaidOnInterest": "0",
//         "amountOutstandingOnInterest": "0",
//         "totalCharge": "0",
//         "startDate": null,
//         "repaymentDate": "2023-11-03T11:22:27.264Z",//null,
//         "isLoanApproved": true,
//         "isOfferAccepted": false,
//         "isServiceChargeDeductionSuccessful": false,
//         "loanServiceChargeTransactionId": null,
//         "loanServiceChargeTransactionReference": null,
//         "isDisbursementSuccessful": false,
//         "loanDisbursementTransactionId": null,
//         "loanDisbursementReference": null,
//         "dateDisbursementWasDone": null,
//         "isRepaymentSuccessful": false,
//         "loanRepaymentTransactionId": null,
//         "loanRepaymentReference": null,
//         "dateRepaymentWasDone": null,
//         "isRecoverySuccessful": null,
//         "loanRecoveryTransactionId": null,
//         "loanRecoveryReference": null,
//         "dateRecoveryWasDone": null,
//         "penalty": "0",
//         "currentState": "nil",
//         "currentLga": "Ibadan South West",
//         "requestType": "request_loan",
//         "approvalStatus": "approved",
//         "processedBy": "tola ola",
//         "label": "request",
//         "status": "pending_disbursement",
//         "checkedForPaymentAt": "2023-11-03T09:40:23.552+01:00",
//         "createdAt": "2023-11-03T09:40:23.578+01:00",
//         "updatedAt": "2023-11-03T09:46:56.598+01:00",
//         "maxAttempts": 50,
//         "attempts": 0,
//         "lastAttemptAt": "2023-11-02T08:46:56.598+01:00",
//         "gracePeriod": 0,
//         "approvals": [
//             {
//                 "id": "10331133-237b-433e-9651-f58d598a28e7",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "requestType": "request_loan",
//                 "approvalStatus": "approved",
//                 "assignedTo": "tola ola",
//                 "approvedBy": "tola ola",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "remark": "done just now",
//                 "createdAt": "2023-11-03T09:40:23.648+01:00",
//                 "updatedAt": "2023-11-03T09:46:56.545+01:00"
//             }
//         ],
//         "timelines": [
//             {
//                 "id": "971cf3c2-1664-4dfc-9f35-e456cde2e2cb",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan approved",
//                 "message": "Michael, your loan of NGN 20 has been approved, please wait while the loan is being granted, thank you.",
//                 "adminMessage": "Michael, loan of NGN 20 was approved.",
//                 "metadata": "amount approved: NGN 20",
//                 "createdAt": "2023-11-03T09:46:56.569+01:00",
//                 "updatedAt": "2023-11-03T09:46:56.569+01:00"
//             },
//             {
//                 "id": "a0c9447c-9767-4008-bac1-289a11a44d5f",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan requested",
//                 "message": "Michael, you just requested a loan of NGN 20.",
//                 "adminMessage": "Michael just requested a loan of NGN 20.",
//                 "metadata": "duration: 2",
//                 "createdAt": "2023-11-03T09:40:23.578+01:00",
//                 "updatedAt": "2023-11-03T09:40:23.593+01:00"
//             }
//         ],
//         "repaymentSchedules": [],
//         "repaidLoans": [],
//         "repaymentDefaulters": []
//     },
//     {
//         "id": "82eec41e-2c4b-40de-a98e-d615e5723fdg",
//         "amountRequested": "2000",
//         "amountApproved": "2000",
//         "walletId": "7033680599",
//         "userId": "2347033680599",
//         "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//         "rfiCode": "apmfb",
//         "customerReference": "1699000823552y",
//         "firstName": "Michael",
//         "lastName": "Alao",
//         "okraCustomerId": "62de783109c31d8bda9763d2",
//         "phone": "2347033680599",
//         "email": "michaeltestingofsoftware@gmail.com",
//         "loanProductName": "Quick Loan",
//         "loanProductId": "fe23666a-0c69-4e06-b323-6423e62a8694",
//         "productDetails": {
//             "id": "fe23666a-0c69-4e06-b323-6423e62a8694",
//             "status": "active",
//             "penalty": "10",
//             "rfiCode": "apmfb",
//             "tagName": "quick short time loan # 1 - 5000",
//             "createdAt": "2023-09-11T10:05:26.693+00:00",
//             "updatedAt": "2023-09-11T10:05:26.693+00:00",
//             "description": "Quick loan for all customers, this loan has a flexible payment plan, and can be paid back within 120 days.",
//             "fixedCharge": "100",
//             "productName": "Quick Loan",
//             "ratedCharge": "10",
//             "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//             "currencyCode": "NGN",
//             "interestRate": "20",
//             "lowestAmount": "100",
//             "highestAmount": "500000",
//             "additionalDetails": "{}",
//             "loanFundingAccount": "168605200474015",
//             "loanRecoveryWalletId": "168605200474015",
//             "loanRepaymentAccount": "168605200474015",
//             "interestOnLoanAccount": "168605200474015",
//             "interestOnLoanWalletId": "168605200474015",
//             "outstandingLoanWalletId": "168605200474015"
//         },
//         "customerSavingsAccount": "0101472574",
//         "loanAccountNumber": "7663070807",
//         "bankCode": "apmfb",
//         "beneficiaryAccountNumber": "0101472574",
//         "beneficiaryAccountName": "ADAM ALAKA",
//         "beneficiaryAccountBankName": "Astrapolaris Mfb",
//         "beneficiaryAccountBankCode": "apmfb",
//         "otherAccountNumber": null,
//         "otherAccountName": null,
//         "otherAccountBankName": null,
//         "otherAccountBankCode": null,
//         "duration": "2",
//         "tagName": "Test cron job",
//         "currencyCode": "NGN",
//         "bvn": "52639807418",
//         "isBvnVerified": false,
//         "lng": "3.8672522",
//         "lat": "7.3679899",
//         "creditRating": null,
//         "interestRate": 0.12,
//         "interestDueOnLoan": "100",
//         "totalAmountToRepay": "2100",
//         "amountPaid": "0",
//         "amountOutstanding": "0",
//         "totalAmountPaidOnLoan": "0",
//         "amountOutstandingOnLoan": "0",
//         "totalAmountPaidOnInterest": "0",
//         "amountOutstandingOnInterest": "0",
//         "totalCharge": "0",
//         "startDate": null,
//         "repaymentDate": "2023-11-03T11:22:27.264Z",//null,
//         "isLoanApproved": true,
//         "isOfferAccepted": false,
//         "isServiceChargeDeductionSuccessful": false,
//         "loanServiceChargeTransactionId": null,
//         "loanServiceChargeTransactionReference": null,
//         "isDisbursementSuccessful": false,
//         "loanDisbursementTransactionId": null,
//         "loanDisbursementReference": null,
//         "dateDisbursementWasDone": null,
//         "isRepaymentSuccessful": false,
//         "loanRepaymentTransactionId": null,
//         "loanRepaymentReference": null,
//         "dateRepaymentWasDone": null,
//         "isRecoverySuccessful": null,
//         "loanRecoveryTransactionId": null,
//         "loanRecoveryReference": null,
//         "dateRecoveryWasDone": null,
//         "penalty": "0",
//         "currentState": "nil",
//         "currentLga": "Ibadan South West",
//         "requestType": "request_loan",
//         "approvalStatus": "approved",
//         "processedBy": "tola ola",
//         "label": "request",
//         "status": "pending_disbursement",
//         "checkedForPaymentAt": "2023-11-03T09:40:23.552+01:00",
//         "createdAt": "2023-11-03T09:40:23.578+01:00",
//         "updatedAt": "2023-11-03T09:46:56.598+01:00",
//         "maxAttempts": 50,
//         "attempts": 0,
//         "lastAttemptAt": "2023-11-02T08:42:56.598+01:00",
//         "gracePeriod": 0,
//         "approvals": [
//             {
//                 "id": "10331133-237b-433e-9651-f58d598a28e7",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "requestType": "request_loan",
//                 "approvalStatus": "approved",
//                 "assignedTo": "tola ola",
//                 "approvedBy": "tola ola",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "remark": "done just now",
//                 "createdAt": "2023-11-03T09:40:23.648+01:00",
//                 "updatedAt": "2023-11-03T09:46:56.545+01:00"
//             }
//         ],
//         "timelines": [
//             {
//                 "id": "971cf3c2-1664-4dfc-9f35-e456cde2e2cb",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan approved",
//                 "message": "Michael, your loan of NGN 20 has been approved, please wait while the loan is being granted, thank you.",
//                 "adminMessage": "Michael, loan of NGN 20 was approved.",
//                 "metadata": "amount approved: NGN 20",
//                 "createdAt": "2023-11-03T09:46:56.569+01:00",
//                 "updatedAt": "2023-11-03T09:46:56.569+01:00"
//             },
//             {
//                 "id": "a0c9447c-9767-4008-bac1-289a11a44d5f",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan requested",
//                 "message": "Michael, you just requested a loan of NGN 20.",
//                 "adminMessage": "Michael just requested a loan of NGN 20.",
//                 "metadata": "duration: 2",
//                 "createdAt": "2023-11-03T09:40:23.578+01:00",
//                 "updatedAt": "2023-11-03T09:40:23.593+01:00"
//             }
//         ],
//         "repaymentSchedules": [],
//         "repaidLoans": [],
//         "repaymentDefaulters": []
//     },
//     {
//         "id": "82eec41e-2c4b-40de-a98e-d615e5723fdh",
//         "amountRequested": "2000",
//         "amountApproved": "2000",
//         "walletId": "7033680599",
//         "userId": "2347033680599",
//         "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//         "rfiCode": "apmfb",
//         "customerReference": "1699000823552y",
//         "firstName": "Michael",
//         "lastName": "Alao",
//         "okraCustomerId": "62de783109c31d8bda9763d2",
//         "phone": "2347033680599",
//         "email": "michaeltestingofsoftware@gmail.com",
//         "loanProductName": "Quick Loan",
//         "loanProductId": "fe23666a-0c69-4e06-b323-6423e62a8694",
//         "productDetails": {
//             "id": "fe23666a-0c69-4e06-b323-6423e62a8694",
//             "status": "active",
//             "penalty": "10",
//             "rfiCode": "apmfb",
//             "tagName": "quick short time loan # 1 - 5000",
//             "createdAt": "2023-09-11T10:05:26.693+00:00",
//             "updatedAt": "2023-09-11T10:05:26.693+00:00",
//             "description": "Quick loan for all customers, this loan has a flexible payment plan, and can be paid back within 120 days.",
//             "fixedCharge": "100",
//             "productName": "Quick Loan",
//             "ratedCharge": "10",
//             "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//             "currencyCode": "NGN",
//             "interestRate": "20",
//             "lowestAmount": "100",
//             "highestAmount": "500000",
//             "additionalDetails": "{}",
//             "loanFundingAccount": "168605200474015",
//             "loanRecoveryWalletId": "168605200474015",
//             "loanRepaymentAccount": "168605200474015",
//             "interestOnLoanAccount": "168605200474015",
//             "interestOnLoanWalletId": "168605200474015",
//             "outstandingLoanWalletId": "168605200474015"
//         },
//         "customerSavingsAccount": "0101472574",
//         "loanAccountNumber": "7663070807",
//         "bankCode": "apmfb",
//         "beneficiaryAccountNumber": "0101472574",
//         "beneficiaryAccountName": "ADAM ALAKA",
//         "beneficiaryAccountBankName": "Astrapolaris Mfb",
//         "beneficiaryAccountBankCode": "apmfb",
//         "otherAccountNumber": null,
//         "otherAccountName": null,
//         "otherAccountBankName": null,
//         "otherAccountBankCode": null,
//         "duration": "2",
//         "tagName": "Test cron job",
//         "currencyCode": "NGN",
//         "bvn": "52639807418",
//         "isBvnVerified": false,
//         "lng": "3.8672522",
//         "lat": "7.3679899",
//         "creditRating": null,
//         "interestRate": 0.12,
//         "interestDueOnLoan": "100",
//         "totalAmountToRepay": "2100",
//         "amountPaid": "0",
//         "amountOutstanding": "0",
//         "totalAmountPaidOnLoan": "0",
//         "amountOutstandingOnLoan": "0",
//         "totalAmountPaidOnInterest": "0",
//         "amountOutstandingOnInterest": "0",
//         "totalCharge": "0",
//         "startDate": null,
//         "repaymentDate": "2023-11-03T11:22:27.264Z",//null,
//         "isLoanApproved": true,
//         "isOfferAccepted": false,
//         "isServiceChargeDeductionSuccessful": false,
//         "loanServiceChargeTransactionId": null,
//         "loanServiceChargeTransactionReference": null,
//         "isDisbursementSuccessful": false,
//         "loanDisbursementTransactionId": null,
//         "loanDisbursementReference": null,
//         "dateDisbursementWasDone": null,
//         "isRepaymentSuccessful": false,
//         "loanRepaymentTransactionId": null,
//         "loanRepaymentReference": null,
//         "dateRepaymentWasDone": null,
//         "isRecoverySuccessful": null,
//         "loanRecoveryTransactionId": null,
//         "loanRecoveryReference": null,
//         "dateRecoveryWasDone": null,
//         "penalty": "0",
//         "currentState": "nil",
//         "currentLga": "Ibadan South West",
//         "requestType": "request_loan",
//         "approvalStatus": "approved",
//         "processedBy": "tola ola",
//         "label": "request",
//         "status": "pending_disbursement",
//         "checkedForPaymentAt": "2023-11-03T09:40:23.552+01:00",
//         "createdAt": "2023-11-03T09:40:23.578+01:00",
//         "updatedAt": "2023-11-03T09:46:56.598+01:00",
//         "maxAttempts": 50,
//         "attempts": 0,
//         "lastAttemptAt": null,// "2023-11-02T08:40:56.598+01:00",
//         "gracePeriod": 0,
//         "approvals": [
//             {
//                 "id": "10331133-237b-433e-9651-f58d598a28e7",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "requestType": "request_loan",
//                 "approvalStatus": "approved",
//                 "assignedTo": "tola ola",
//                 "approvedBy": "tola ola",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "remark": "done just now",
//                 "createdAt": "2023-11-03T09:40:23.648+01:00",
//                 "updatedAt": "2023-11-03T09:46:56.545+01:00"
//             }
//         ],
//         "timelines": [
//             {
//                 "id": "971cf3c2-1664-4dfc-9f35-e456cde2e2cb",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan approved",
//                 "message": "Michael, your loan of NGN 20 has been approved, please wait while the loan is being granted, thank you.",
//                 "adminMessage": "Michael, loan of NGN 20 was approved.",
//                 "metadata": "amount approved: NGN 20",
//                 "createdAt": "2023-11-03T09:46:56.569+01:00",
//                 "updatedAt": "2023-11-03T09:46:56.569+01:00"
//             },
//             {
//                 "id": "a0c9447c-9767-4008-bac1-289a11a44d5f",
//                 "loanId": "82eec41e-2c4b-40de-a98e-d615e5723fdf",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan requested",
//                 "message": "Michael, you just requested a loan of NGN 20.",
//                 "adminMessage": "Michael just requested a loan of NGN 20.",
//                 "metadata": "duration: 2",
//                 "createdAt": "2023-11-03T09:40:23.578+01:00",
//                 "updatedAt": "2023-11-03T09:40:23.593+01:00"
//             }
//         ],
//         "repaymentSchedules": [],
//         "repaidLoans": [],
//         "repaymentDefaulters": []
//     },
//     {
//         "id": "fe067048-2361-4d89-a291-0b136a99f493",
//         "amountRequested": "2000",
//         "amountApproved": "2000",
//         "walletId": "7033680599",
//         "userId": "2347033680599",
//         "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//         "rfiCode": "apmfb",
//         "customerReference": "1698245775289J",
//         "firstName": "Michael",
//         "lastName": "Alao",
//         "okraCustomerId": "62de783109c31d8bda9763d2",
//         "phone": "2347033680599",
//         "email": "michaeltestingofsoftware@gmail.com",
//         "loanProductName": "Quick Loan",
//         "loanProductId": "fe23666a-0c69-4e06-b323-6423e62a8694",
//         "productDetails": {
//             "id": "fe23666a-0c69-4e06-b323-6423e62a8694",
//             "status": "active",
//             "penalty": "10",
//             "rfiCode": "apmfb",
//             "tagName": "quick short time loan # 1 - 5000",
//             "createdAt": "2023-09-11T10:05:26.693+00:00",
//             "updatedAt": "2023-09-11T10:05:26.693+00:00",
//             "description": "Quick loan for all customers, this loan has a flexible payment plan, and can be paid back within 120 days.",
//             "fixedCharge": "100",
//             "productName": "Quick Loan",
//             "ratedCharge": "10",
//             "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//             "currencyCode": "NGN",
//             "interestRate": "20",
//             "lowestAmount": "100",
//             "highestAmount": "500000",
//             "additionalDetails": "{}",
//             "loanFundingAccount": "168605200474015",
//             "loanRecoveryWalletId": "168605200474015",
//             "loanRepaymentAccount": "168605200474015",
//             "interestOnLoanAccount": "168605200474015",
//             "interestOnLoanWalletId": "168605200474015",
//             "outstandingLoanWalletId": "168605200474015"
//         },
//         "customerSavingsAccount": "0101472574",
//         "loanAccountNumber": "7663070807",
//         "bankCode": "apmfb",
//         "beneficiaryAccountNumber": "0101472574",
//         "beneficiaryAccountName": "ADAM ALAKA",
//         "beneficiaryAccountBankName": "Astrapolaris Mfb",
//         "beneficiaryAccountBankCode": "apmfb",
//         "otherAccountNumber": null,
//         "otherAccountName": null,
//         "otherAccountBankName": null,
//         "otherAccountBankCode": null,
//         "duration": "2",
//         "tagName": "Test",
//         "currencyCode": "NGN",
//         "bvn": "52639807418",
//         "isBvnVerified": false,
//         "lng": "3.8672608",
//         "lat": "7.3679937",
//         "creditRating": null,
//         "interestRate": 0.12,
//         "interestDueOnLoan": "100",
//         "totalAmountToRepay": "2100",
//         "amountPaid": "2100",
//         "amountOutstanding": "0",
//         "totalAmountPaidOnLoan": "2000",
//         "amountOutstandingOnLoan": "0",
//         "totalAmountPaidOnInterest": "100",
//         "amountOutstandingOnInterest": "0",
//         "totalCharge": "300",
//         "startDate": "2023-10-25T16:07:53.842+01:00",
//         "repaymentDate": "2023-10-27T16:07:53.842+01:00",
//         "isLoanApproved": true,
//         "isOfferAccepted": false,
//         "isServiceChargeDeductionSuccessful": true,
//         "loanServiceChargeTransactionId": "16982464732263663",
//         "loanServiceChargeTransactionReference": "LOAN_SERVICE-1698246473192kh9i-fe067048-2361-4d89-a291-0b136a99f493",
//         "isDisbursementSuccessful": true,
//         "loanDisbursementTransactionId": "16982464734861158",
//         "loanDisbursementReference": "LOAN_SERVICE-1698246473407b9IE-fe067048-2361-4d89-a291-0b136a99f493",
//         "dateDisbursementWasDone": null,
//         "isRepaymentSuccessful": true,
//         "loanRepaymentTransactionId": "16982465942975536",
//         "loanRepaymentReference": "LOAN_SERVICE-1698246594256sz7g-fe067048-2361-4d89-a291-0b136a99f493",
//         "dateRepaymentWasDone": null,
//         "isRecoverySuccessful": null,
//         "loanRecoveryTransactionId": null,
//         "loanRecoveryReference": null,
//         "dateRecoveryWasDone": null,
//         "penalty": "0",
//         "currentState": "nil",
//         "currentLga": "Ibadan South West",
//         "requestType": "repay_loan",
//         "approvalStatus": "approved",
//         "processedBy": "Super Admin",
//         "label": "repayment",
//         "status": "completed",
//         "checkedForPaymentAt": "2023-10-25T16:09:54.248+01:00",
//         "createdAt": "2023-10-25T15:56:15.311+01:00",
//         "updatedAt": "2023-10-25T16:09:54.717+01:00",
//         "maxAttempts": 50,
//         "attempts": 0,
//         "lastAttemptAt": "2023-11-02T08:44:56.598+01:00",
//         "gracePeriod": 0,
//         "approvals": [
//             {
//                 "id": "b336f05f-d7e4-49ee-9070-66abd7b9cf71",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "requestType": "request_loan",
//                 "approvalStatus": "approved",
//                 "assignedTo": "tola ola",
//                 "approvedBy": "tola ola",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "remark": "done just now",
//                 "createdAt": "2023-10-25T15:56:15.345+01:00",
//                 "updatedAt": "2023-10-25T16:07:53.103+01:00"
//             }
//         ],
//         "timelines": [
//             {
//                 "id": "2dd61c50-aaf2-4bbc-aa2b-241168c0a599",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan repayment",
//                 "message": "Michael, NGN 21 out of your loan of NGN 21 has been repaid, your outstanding loan amount is NGN 0. Please check your account,thank you.",
//                 "adminMessage": "NGN 21 out of Michael, loan of NGN 21 has been repaid, outstanding loan amount is NGN 0.",
//                 "metadata": "total amount deducted plus interest: NGN 21",
//                 "createdAt": "2023-10-25T16:09:54.743+01:00",
//                 "updatedAt": "2023-10-25T16:09:54.743+01:00"
//             },
//             {
//                 "id": "c42bebc4-bbba-4c9c-907f-620eb09614fe",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan granted",
//                 "message": "Michael, your loan of NGN 20 has been granted, please check your account, thank you.",
//                 "adminMessage": "Michael, loan of NGN 20 has been granted.",
//                 "metadata": "amount to repay: NGN 21",
//                 "createdAt": "2023-10-25T16:07:53.884+01:00",
//                 "updatedAt": "2023-10-25T16:07:53.884+01:00"
//             },
//             {
//                 "id": "3ac3d7a5-c26f-4f62-9def-b45e7ebab6ab",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan approved",
//                 "message": "Michael, your loan of NGN 20 has been approved, please wait while the loan is being granted, thank you.",
//                 "adminMessage": "Michael, loan of NGN 20 was approved.",
//                 "metadata": "amount approved: NGN 20",
//                 "createdAt": "2023-10-25T16:07:53.132+01:00",
//                 "updatedAt": "2023-10-25T16:07:53.132+01:00"
//             },
//             {
//                 "id": "f1aa355b-1d63-4ccd-ab07-0060702ddeb5",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan requested",
//                 "message": "Michael, you just requested a loan of NGN 20.",
//                 "adminMessage": "Michael just requested a loan of NGN 20.",
//                 "metadata": "duration: 2",
//                 "createdAt": "2023-10-25T15:56:15.311+01:00",
//                 "updatedAt": "2023-10-25T15:56:15.321+01:00"
//             }
//         ],
//         "repaymentSchedules": [
//             {
//                 "id": "c18ed1a3-0910-4d0d-a618-50c48ba6b870",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "amount": "2000",
//                 "interest": "100",
//                 "totalAmountDue": "2100",
//                 "repaymentDueDate": "2023-10-27T00:00:00.000+01:00",
//                 "paid": true,
//                 "transactionId": "16982465942975536",
//                 "transactionReference": "LOAN_SERVICE-1698246473407b9IE-fe067048-2361-4d89-a291-0b136a99f493",
//                 "type": "automated",
//                 "subType": "sagamy",
//                 "repaymentModel": "full",
//                 "createdAt": "2023-10-25T16:07:53.846+01:00",
//                 "updatedAt": "2023-10-25T16:09:54.732+01:00"
//             }
//         ],
//         "repaidLoans": [
//             {
//                 "id": "41a7684c-7564-45d0-ab2f-c7e1bac9de7e",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "fe067048-2361-4d89-a291-0b136a99f493",
//                 "repaymentScheduleId": "c18ed1a3-0910-4d0d-a618-50c48ba6b870",
//                 "amount": "2000",
//                 "interest": "100",
//                 "amountDue": "2100",
//                 "amountPaid": "2100",
//                 "amountOutstanding": "0",
//                 "repaymentDueDate": "2023-10-27T00:00:00.000+01:00",
//                 "paid": true,
//                 "transactionId": "16982465942975536",
//                 "transactionReference": "LOAN_SERVICE-1698246594256sz7g-fe067048-2361-4d89-a291-0b136a99f493",
//                 "label": "repayment",
//                 "type": "manual",
//                 "subType": "apmfb",
//                 "repaymentModel": "full",
//                 "createdAt": "2023-10-25T16:09:54.736+01:00",
//                 "updatedAt": "2023-10-25T16:09:54.736+01:00"
//             }
//         ],
//         "repaymentDefaulters": []
//     },
//     {
//         "id": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//         "amountRequested": "2500",
//         "amountApproved": "2500",
//         "walletId": "7033680599",
//         "userId": "2347033680599",
//         "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//         "rfiCode": "apmfb",
//         "customerReference": "1698244600083q",
//         "firstName": "Michael",
//         "lastName": "Alao",
//         "okraCustomerId": "62de783109c31d8bda9763d2",
//         "phone": "2347033680599",
//         "email": "michaeltestingofsoftware@gmail.com",
//         "loanProductName": "Quick Loan",
//         "loanProductId": "fe23666a-0c69-4e06-b323-6423e62a8694",
//         "productDetails": {
//             "id": "fe23666a-0c69-4e06-b323-6423e62a8694",
//             "status": "active",
//             "penalty": "10",
//             "rfiCode": "apmfb",
//             "tagName": "quick short time loan # 1 - 5000",
//             "createdAt": "2023-09-11T10:05:26.693+00:00",
//             "updatedAt": "2023-09-11T10:05:26.693+00:00",
//             "description": "Quick loan for all customers, this loan has a flexible payment plan, and can be paid back within 120 days.",
//             "fixedCharge": "100",
//             "productName": "Quick Loan",
//             "ratedCharge": "10",
//             "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//             "currencyCode": "NGN",
//             "interestRate": "20",
//             "lowestAmount": "100",
//             "highestAmount": "500000",
//             "additionalDetails": "{}",
//             "loanFundingAccount": "168605200474015",
//             "loanRecoveryWalletId": "168605200474015",
//             "loanRepaymentAccount": "168605200474015",
//             "interestOnLoanAccount": "168605200474015",
//             "interestOnLoanWalletId": "168605200474015",
//             "outstandingLoanWalletId": "168605200474015"
//         },
//         "customerSavingsAccount": "0101472574",
//         "loanAccountNumber": "7663070807",
//         "bankCode": "apmfb",
//         "beneficiaryAccountNumber": "0101472574",
//         "beneficiaryAccountName": "ADAM ALAKA",
//         "beneficiaryAccountBankName": "Astrapolaris Mfb",
//         "beneficiaryAccountBankCode": "apmfb",
//         "otherAccountNumber": null,
//         "otherAccountName": null,
//         "otherAccountBankName": null,
//         "otherAccountBankCode": null,
//         "duration": "2",
//         "tagName": "Test quick repayment ",
//         "currencyCode": "NGN",
//         "bvn": "52639807418",
//         "isBvnVerified": false,
//         "lng": "3.8672645",
//         "lat": "7.3679926",
//         "creditRating": null,
//         "interestRate": 0.12,
//         "interestDueOnLoan": "100",
//         "totalAmountToRepay": "2600",
//         "amountPaid": "2600",
//         "amountOutstanding": "0",
//         "totalAmountPaidOnLoan": "2500",
//         "amountOutstandingOnLoan": "0",
//         "totalAmountPaidOnInterest": "100",
//         "amountOutstandingOnInterest": "0",
//         "totalCharge": "350",
//         "startDate": "2023-10-25T15:53:33.005+01:00",
//         "repaymentDate": "2023-10-27T15:53:33.005+01:00",
//         "isLoanApproved": true,
//         "isOfferAccepted": false,
//         "isServiceChargeDeductionSuccessful": true,
//         "loanServiceChargeTransactionId": "16982456123663295",
//         "loanServiceChargeTransactionReference": "LOAN_SERVICE-1698245612333ks39-59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//         "isDisbursementSuccessful": true,
//         "loanDisbursementTransactionId": "16982456126162134",
//         "loanDisbursementReference": "LOAN_SERVICE-1698245612543Rhhz-59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//         "dateDisbursementWasDone": null,
//         "isRepaymentSuccessful": true,
//         "loanRepaymentTransactionId": "16982456738329816",
//         "loanRepaymentReference": "LOAN_SERVICE-1698245673770MLvi-59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//         "dateRepaymentWasDone": null,
//         "isRecoverySuccessful": null,
//         "loanRecoveryTransactionId": null,
//         "loanRecoveryReference": null,
//         "dateRecoveryWasDone": null,
//         "penalty": "0",
//         "currentState": "nil",
//         "currentLga": "Ibadan South West",
//         "requestType": "repay_loan",
//         "approvalStatus": "approved",
//         "processedBy": "Super Admin",
//         "label": "repayment",
//         "status": "completed",
//         "checkedForPaymentAt": "2023-10-25T15:54:33.759+01:00",
//         "createdAt": "2023-10-25T15:36:40.107+01:00",
//         "updatedAt": "2023-10-25T15:54:34.356+01:00",
//         "maxAttempts": 50,
//         "attempts": 0,
//         "lastAttemptAt": "2023-11-03T09:46:56.598+01:00",
//         "gracePeriod": 0,
//         "approvals": [
//             {
//                 "id": "45b389a2-9a75-4615-aef9-5e85fcc713bd",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "requestType": "request_loan",
//                 "approvalStatus": "approved",
//                 "assignedTo": "tola ola",
//                 "approvedBy": "tola ola",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "remark": "done just now",
//                 "createdAt": "2023-10-25T15:36:40.136+01:00",
//                 "updatedAt": "2023-10-25T15:53:32.247+01:00"
//             }
//         ],
//         "timelines": [
//             {
//                 "id": "0495f2ea-a27a-4043-9c56-4a1c888e7f16",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan repayment",
//                 "message": "Michael, NGN 26 out of your loan of NGN 26 has been repaid, your outstanding loan amount is NGN 0. Please check your account,thank you.",
//                 "adminMessage": "NGN 26 out of Michael, loan of NGN 26 has been repaid, outstanding loan amount is NGN 0.",
//                 "metadata": "total amount deducted plus interest: NGN 26",
//                 "createdAt": "2023-10-25T15:54:34.390+01:00",
//                 "updatedAt": "2023-10-25T15:54:34.391+01:00"
//             },
//             {
//                 "id": "4c31c074-c8ba-4047-a896-eda007168d8a",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan granted",
//                 "message": "Michael, your loan of NGN 25 has been granted, please check your account, thank you.",
//                 "adminMessage": "Michael, loan of NGN 25 has been granted.",
//                 "metadata": "amount to repay: NGN 26",
//                 "createdAt": "2023-10-25T15:53:33.060+01:00",
//                 "updatedAt": "2023-10-25T15:53:33.061+01:00"
//             },
//             {
//                 "id": "dbd66af4-2896-4f59-91da-3d9c3e79b5dc",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan approved",
//                 "message": "Michael, your loan of NGN 25 has been approved, please wait while the loan is being granted, thank you.",
//                 "adminMessage": "Michael, loan of NGN 25 was approved.",
//                 "metadata": "amount approved: NGN 25",
//                 "createdAt": "2023-10-25T15:53:32.281+01:00",
//                 "updatedAt": "2023-10-25T15:53:32.281+01:00"
//             },
//             {
//                 "id": "b8f21da3-8169-4648-a7db-d85d3edec327",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "userId": "2347033680599",
//                 "walletId": "7033680599",
//                 "action": "loan requested",
//                 "message": "Michael, you just requested a loan of NGN 25.",
//                 "adminMessage": "Michael just requested a loan of NGN 25.",
//                 "metadata": "duration: 2",
//                 "createdAt": "2023-10-25T15:36:40.107+01:00",
//                 "updatedAt": "2023-10-25T15:36:40.113+01:00"
//             }
//         ],
//         "repaymentSchedules": [
//             {
//                 "id": "be968ad0-b756-4afb-a77b-e7f16da1c1ef",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "amount": "2500",
//                 "interest": "100",
//                 "totalAmountDue": "2600",
//                 "repaymentDueDate": "2023-10-27T00:00:00.000+01:00",
//                 "paid": true,
//                 "transactionId": "16982456738329816",
//                 "transactionReference": "LOAN_SERVICE-1698245612543Rhhz-59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "type": "automated",
//                 "subType": "sagamy",
//                 "repaymentModel": "full",
//                 "createdAt": "2023-10-25T15:53:33.010+01:00",
//                 "updatedAt": "2023-10-25T15:54:34.380+01:00"
//             }
//         ],
//         "repaidLoans": [
//             {
//                 "id": "9e1dcf73-6200-4d97-ab99-d7a7375b0945",
//                 "rfiRecordId": "6beb4808-c5a1-4a49-89ee-dbe2011e26bf",
//                 "rfiCode": "apmfb",
//                 "walletId": "7033680599",
//                 "userId": "2347033680599",
//                 "loanId": "59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "repaymentScheduleId": "be968ad0-b756-4afb-a77b-e7f16da1c1ef",
//                 "amount": "2500",
//                 "interest": "100",
//                 "amountDue": "2600",
//                 "amountPaid": "2600",
//                 "amountOutstanding": "0",
//                 "repaymentDueDate": "2023-10-27T00:00:00.000+01:00",
//                 "paid": true,
//                 "transactionId": "16982456738329816",
//                 "transactionReference": "LOAN_SERVICE-1698245673770MLvi-59b3aa8c-5eb4-4284-9a21-d4daabcbed48",
//                 "label": "repayment",
//                 "type": "manual",
//                 "subType": "apmfb",
//                 "repaymentModel": "full",
//                 "createdAt": "2023-10-25T15:54:34.384+01:00",
//                 "updatedAt": "2023-10-25T15:54:34.384+01:00"
//             }
//         ],
//         "repaymentDefaulters": []
//     }
// ];

// const filteredData = filterArrayByCriteria(data, timestamp, limit);
// console.log(filteredData);


